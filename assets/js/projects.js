// –ú–∞—Å—Å–∏–≤ projectsData ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
// –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Å—Ç–∞—Ç—É—Å, —Å—Å—ã–ª–∫–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
const projectsData = [
    {
        id: 1,
        title: "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ MyLifeTime",
        description: "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–µ–¥–µ–Ω–∏—è –¥–Ω–µ–≤–Ω–∏–∫–∞ –∂–∏–∑–Ω–∏, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –∑–∞–º–µ—Ç–æ–∫. –≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–∏–ø–µ—Ä–∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏ —Ç–∞–π–º–µ—Ä–æ–≤.",
        fullDescription: "",
        technologies: ["Flutter", "Dart", "etc not included"],
        category: "Mobile",
        image: "assets/icons/MyLifeTime.jpg",
        liveUrl: "#",
        githubUrl: "https://github.com/Samurai2306/MyLifeTime_Flutter_Dart",
        featured: true,
        status: "in-progress"
    },
    {
        id: 2,
        title: "–°–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—ë—Ç–æ–≤ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—Ö –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–æ–≤",
        description: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –†–æ—Å–∞–≤–∏–∞—Ü–∏–∏ —Å —Ü–µ–ª—å—é –æ—Ü–µ–Ω–∫–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–ª—ë—Ç–æ–≤ –ë–ü–õ–ê –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º –†–§.",
        fullDescription: "–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö —Å –≤–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –Ω–∞ –æ—Å–Ω–æ–≤–µ Python Pandas –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –≥–µ–æ–∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –õ–¶–¢ –•–∞–∫–∞—Ç–æ–Ω–∞ 2025. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö —Å –≤–µ–± —Å–µ—Ä–≤–∏—Å–æ–º –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä—è–º–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏—Ç–æ–≥–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤. –¢–∞–∫ –∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤.",
        technologies: ["Python", "Pandas", "PostgreSQL", "–≥–µ–æ–∞–Ω–∞–ª–∏—Ç–∏–∫–∞", "React", "Next.js"],
        category: "Web",
        image: "assets/icons/1583227995top-secret-sticker.svg",
        liveUrl: "#",
        githubUrl: "https://github.com/Samurai2306/Ha-Haton-L-2025-",
        featured: false,
        status: "completed"
    },
    {
        id: 3,
        title: "–ú–µ—Å—Ç–æ–°–ª–æ–≤ - –ê—É–¥–∏–æ—ç–∫—Å–∫—É—Ä—Å–∏–∏ —Å –ì–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π",
        description: "Progressive Web Application –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—á–Ω—ã—Ö –∞—É–¥–∏–æ–º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ –†–æ—Å—Å–∏–∏",
        fullDescription: "–ú–µ—Å—Ç–æ–°–ª–æ–≤ ‚Äî —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –¥–æ—Å—Ç—É–ø –∫ –∞—É—Ç–µ–Ω—Ç–∏—á–Ω–æ–π –†–æ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–µ –∞—É–¥–∏–æ—Ä–∞—Å—Å–∫–∞–∑—ã –º–µ—Å—Ç–Ω—ã—Ö –∂–∏—Ç–µ–ª–µ–π. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ—Ä–∞–º –ª–µ–≥–∫–æ –º–æ–Ω–µ—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –º–∞—Ä—à—Ä—É—Ç—ã, –∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º ‚Äî –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –º–∞–ª–æ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –º–µ—Å—Ç–∞ —Å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –æ—Ç –≥–∏–¥–æ–≤ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π.",
        technologies: ["TypeScript", "React", "Node.js", "PostgeSQL"],
        category: "web",
        image: "assets/icons/MestoSlov.png",
        liveUrl: "#",
        githubUrl: "https://github.com/Samurai2306/Project_MestoSlov",
        featured: false,
        status: "in-progress"
    }
];

// –ö–ª–∞—Å—Å ProjectsManager ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
// –í–∫–ª—é—á–∞–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
class ProjectsManager {
    constructor() {
        // this.projects ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
        this.projects = projectsData;
        // this.filteredProjects ‚Äî –º–∞—Å—Å–∏–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞
        this.filteredProjects = [...this.projects];
        // this.currentFilter ‚Äî —Ç–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
        this.currentFilter = 'all';
        // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å—Ä–∞–∑—É –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
        this.init();
    }

    /**
     * –ú–µ—Ç–æ–¥ init ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏:
     * 1. –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
     * 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
     * 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
     * 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
     */
    init() {
        this.renderProjects(); // –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–µ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
        this.initFilters(); // –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        this.initModal(); // –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π
        this.setupImageFallbacks(); // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    }

    /**
     * –ú–µ—Ç–æ–¥ renderProjects ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –æ—Ç—Ä–∏—Å–æ–≤–∫—É –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ —Å–µ—Ç–∫–µ
     * –ü–æ–ª—É—á–∞–µ—Ç DOM-—ç–ª–µ–º–µ–Ω—Ç —Å–µ—Ç–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É
     */
    renderProjects() {
        const grid = document.getElementById('projectsGrid');
        if (!grid) return;
        
        grid.innerHTML = '';

        this.filteredProjects.forEach(project => {
            const projectCard = this.createProjectCard(project);
            grid.appendChild(projectCard);
        });
    }

    createProjectCard(project) {
        const card = document.createElement('div');
        card.className = `project-card glass-card ${project.category} ${project.featured ? 'featured' : ''}`;
        
        const tagsHTML = project.technologies.map(tech => 
            `<span class="tech-tag">${tech}</span>`
        ).join('');

        card.innerHTML = `
            <div class="project-image">
                <img src="${project.image}" alt="${project.title}" loading="lazy" 
                     onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWExYTFhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg=='">
                ${project.featured ? '<span class="featured-badge">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–π</span>' : ''}
                ${project.status === 'in-progress' ? '<span class="status-badge">üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</span>' : ''}
            </div>
            <div class="project-content">
                <h3>${project.title}</h3>
                <p>${project.description}</p>
                <div class="project-tech">${tagsHTML}</div>
                <div class="project-actions">
                    <button class="view-details" data-id="${project.id}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                    ${project.liveUrl !== '#' ? `<a href="${project.liveUrl}" class="view-live" target="_blank" rel="noopener">Live Demo</a>` : ''}
                </div>
            </div>
        `;

        return card;
    }

    initFilters() {
        const filterBtns = document.querySelectorAll('.filter-btn');
        if (!filterBtns.length) return;
        
        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Update active button
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Filter projects
                const filter = btn.dataset.filter;
                this.currentFilter = filter;
                
                if (filter === 'all') {
                    this.filteredProjects = [...this.projects];
                } else {
                    this.filteredProjects = this.projects.filter(project => 
                        project.category === filter
                    );
                }
                
                this.renderProjects();
            });
        });
    }

    initModal() {
        const modal = document.getElementById('projectModal');
        const closeBtn = document.querySelector('.close-modal');
        
        if (!modal || !closeBtn) return;
        
        // Close modal
        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        // Close on outside click
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Close on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.style.display === 'block') {
                modal.style.display = 'none';
            }
        });

        // View details buttons
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('view-details')) {
                const projectId = parseInt(e.target.dataset.id);
                this.openProjectModal(projectId);
            }
        });
    }

    openProjectModal(projectId) {
        const project = this.projects.find(p => p.id === projectId);
        if (!project) return;

        const modal = document.getElementById('projectModal');
        const modalImg = document.getElementById('modalImg');
        const modalTitle = document.getElementById('modalTitle');
        const modalDescription = document.getElementById('modalDescription');
        const modalTech = document.getElementById('modalTech');
        const modalLive = document.getElementById('modalLive');
        const modalGitHub = document.getElementById('modalGitHub');

        if (!modal || !modalImg || !modalTitle || !modalDescription || !modalTech || !modalLive || !modalGitHub) return;

        // Set modal content
        modalImg.src = project.image;
        modalImg.alt = project.title;
        modalTitle.textContent = project.title;
        modalDescription.textContent = project.fullDescription;

        // Technologies
        modalTech.innerHTML = project.technologies.map(tech => 
            `<span class="tech-tag">${tech}</span>`
        ).join('');

        // Links
        modalLive.href = project.liveUrl;
        modalGitHub.href = project.githubUrl;

        if (project.liveUrl === '#') {
            modalLive.style.display = 'none';
        } else {
            modalLive.style.display = 'inline-block';
        }

        // Show modal
        modal.style.display = 'block';
        
        // Focus trap for accessibility
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
    }

    setupImageFallbacks() {
        // Add error handling for images
        document.addEventListener('error', (e) => {
            if (e.target.tagName === 'IMG') {
                e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWExYTFhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==';
            }
        }, true);
    }
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    new ProjectsManager();
});

// Handle responsive images
function handleImageResponsiveness() {
    const images = document.querySelectorAll('img');
    images.forEach(img => {
        // Add loading lazy for better performance
        if (!img.loading) {
            img.loading = 'lazy';
        }
    });
}

document.addEventListener('DOMContentLoaded', handleImageResponsiveness);